<html>
  <head>
    <script>
      let fscSession = {
        reset: true, // reset the cart and session (will remove everything added to the cart or passed to the session prior to this)
        // products: [
        //   {
        //     path: "simplify-gmail-annual",
        //     quantity: 1,
        //   },
        // ],
        paymentContact: {
          email: "hi.simplify@gmail.com",
          firstName: "Michael",
          lastName: "Leggett",
        },
      };

      let customer = {
        // customer details - optional unless you pass accountCustomKey (below); if you pass customer contact info, the Storefront does not prompt the customer to provide it during checkout
        contact: {
          firstName: "Michael", // customer first name - required when passing contact info
          lastName: "Leggett", // customer last name - required when passing contact info
          email: "hi.simplify@gmail.com", // customer email address - required when passing contact info
        },
      };
    </script>
    <script
      id="fsc-api"
      src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/0.8.5/fastspring-builder.min.js"
      type="text/javascript"
      data-storefront="simplify.test.onfastspring.com/popup-simplify"
      data-data-callback="dataCallbackFunction"
      data-popup-closed="onPopupClose"
      data-error-callback="errorCallback"
      data-popup-webhook-received="popupWebhookReceived"
      data-debug="true"
    ></script>
    <!-- Documentation: https://fastspring.com/docs/get-started-with-store-builder-library/
      data-before-requests-callback="beforeRequestsCallbackFunction"
      data-after-requests-callback="afterRequestsCallbackFunction"
      data-before-markup-callback="beforeMarkupCallbackFunction"
      data-after-markup-callback="afterMarkupCallbackFunction"
      data-decorate-callback="decorateURLFunction"
      data-popup-event-received="popupEventReceived"
      data-access-key=".. access key .."
      data-continuous="true"
    -->

    <script>
      function dataCallbackFunction(order) {
        console.log("[Simplify] Order data retrieved", order);
      }
      function errorCallback(code, string) {
        console.log("[Simplify] Error: ", code, string);
      }
      function onPopupClose(order) {
        if (order === null) {
          console.log("[Simplify] Popup closed: Order failed", order);
        } else {
          console.log("[Simplify] Popup closed: Order succeeded?", order);
        }
      }
      function popupWebhookReceived(order) {
        console.log("[Simplify] Order received?", order);
      }

      // Init customer data
      fastspring.builder.recognize({
        email: "hi.simplify@gmail.com",
        firstName: "Michael",
        lastName: "Leggett",
      });

      function updateSession(product, qty) {
        fastspring.builder.update(product, qty);
        // return;

        // let fscSessionUpdate = {
        //   reset: true, // reset the cart and session (will remove everything added to the cart or passed to the session prior to this)
        //   products: [
        //     {
        //       path: product,
        //       quantity: quantity,
        //     },
        //   ],
        //   paymentContact: {
        //     email: "hi.simplify@gmail.com",
        //     firstName: "Michael",
        //     lastName: "Leggett",
        //   },
        // };

        // fastspring.builder.push(fscSessionUpdate);
      }
    </script>
    <style>
      body {
        padding: 100px;
        line-height: 1.7em;
        font-size: 16px;
      }
      li {
        padding-bottom: 0.7em;
      }
    </style>
  </head>
  <body>
    <b>Pricing v1.7</b> - In testing. Not for real use.

    <ul>
      <li>
        Individual:
        <a
          href="#"
          data-fsc-action="Reset,Add,Checkout"
          data-fsc-item-path-value="simplify-gmail-annual"
          onmousedown="updateSession('simplify-gmail-annual', 1)"
          >Annual ($24)</a
        >
        |
        <a
          href="#"
          data-fsc-action="Reset,Add,Checkout"
          data-fsc-item-path-value="simplify-gmail-monthly"
          onmousedown="updateSession('simplify-gmail-monthly', 1)"
          >Monthly ($3)</a
        >
      </li>
      <li>
        Group of 2:
        <a
          href="#"
          data-fsc-action="Reset,Add,Checkout"
          data-fsc-item-path-value="simplify-gmail-annual"
          onmousedown="updateSession('simplify-gmail-annual', 2)"
          >Annual ($36)</a
        >
        |
        <a
          href="#"
          data-fsc-action="Reset,Add,Checkout"
          data-fsc-item-path-value="simplify-gmail-monthly"
          onmousedown="updateSession('simplify-gmail-monthly', 2)"
          >Monthly ($4)</a
        >
      </li>
    </ul>
    <!-- <div id="plan">
      <span class="annual"
        ><b>Annual</b> |
        <a href="#" onclick="updatePlan('monthly')">Monthly</a></span
      >
      <span class="monthly"
        ><a href="#" onclick="updatePlan('annual')">Annual</a> |
        <b>Monthly</b></span
      >
    </div>
    <div id="quantity">
      <input
        type="number"
        id="quantity-value"
        min="1"
        max="20"
        step="1"
        data-fsc-item-quantity-value="1"
        value="1"
      />
      <div class="quantity-nav">
        <div class="quantity-button quantity-up">+</div>
        <div class="quantity-button quantity-down">-</div>
      </div>
    </div>
    <button
      data-fsc-action="Reset,Add,Checkout"
      data-fsc-item-path-value="simplify-gmail-annual"
    >
      Checkout
    </button> -->
  </body>
</html>
